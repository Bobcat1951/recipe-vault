<!DOCTYPE html>
<html lang="en">
<head>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipe Vault</title>

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f8fafc;
    }

    header {
      position: relative;
      padding: 16px;
      background: #1e293b;
      color: white;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
    }

    .back {
      position: absolute;
      left: 16px;
      top: 12px;
      background: none;
      border: none;
      color: white;
      font-size: 26px;
      cursor: pointer;
      padding: 6px 10px;
      z-index: 10;
    }

    .back:active {
      opacity: 0.6;
    }
  </style>
</head>
</head>
<body>
<header>
  header {
  position: relative;
  padding: 16px;
  background: #1e293b;
  color: white;
  text-align: center;
}

.back {
  position: absolute;
  left: 16px;
  top: 16px;
  background: none;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
  padding: 8px;
  z-index: 10;
}
</header>

<div id="app"></div>

<script>
const categories=["Beef","Chicken","Pork","Lamb","Pasta","Seafood","Desserts","Sauces"];
let state=JSON.parse(localStorage.getItem("recipes")||"{}");
let notes=JSON.parse(localStorage.getItem("notes")||"{}");
function save(){
 localStorage.setItem("recipes",JSON.stringify(state));
 localStorage.setItem("notes",JSON.stringify(notes));
}

function home(){
 document.getElementById("app").innerHTML=`
 <div class="list">
 <button onclick="allSearch()">üîç All Recipes Search</button>
 </div>
 <div class="grid">
 ${categories.map(c=>`<button onclick="openCat('${c}')">${c}</button>`).join("")}
 </div>`;
}

function openCat(cat){
 state[cat]=state[cat]||[];
 notes[cat]=notes[cat]||"";
 document.getElementById("app").innerHTML=`
 <div class="list">
 <div class="top">
 <button class="small" onclick="home()">‚Üê Back</button>
 <button class="small" onclick="addRecipe('${cat}')">Ôºã Add</button>
 </div>
 <textarea placeholder="Category notes..." 
 oninput="notes['${cat}']=this.value;save()">${notes[cat]}</textarea>
 <input placeholder="Search ${cat}..." oninput="filter(this.value,'${cat}')"/>
 <div id="items">
 ${state[cat].map((r,i)=>itemHTML(cat,i,r)).join("")}
 </div>
 </div>`;
}

function itemHTML(cat,i,r){
 return `<div class="item" onclick="editRecipe('${cat}',${i})">${r.name}</div>`;
}

function filter(val,cat){
 const items=state[cat].filter(r=>r.name.toLowerCase().includes(val.toLowerCase()));
 document.getElementById("items").innerHTML=items.map((r,i)=>itemHTML(cat,i,r)).join("");
}

function addRecipe(cat){
 state[cat].push({name:"New Recipe",text:""});
 save(); openCat(cat);
}

function editRecipe(cat,i){
 const r=state[cat][i];
 document.getElementById("app").innerHTML=`
 <div class="list">
 <button onclick="openCat('${cat}')">‚Üê Back</button>
 <input value="${r.name}" 
 oninput="state['${cat}'][${i}].name=this.value;save()"/>
 <textarea 
 oninput="state['${cat}'][${i}].text=this.value;save()">
 ${r.text}
 </textarea>
 </div>`;
}

function allSearch(){
 document.getElementById("app").innerHTML=`
 <div class="list">
 <button onclick="home()">‚Üê Back</button>
 <input placeholder="Search everything..." oninput="allFilter(this.value)"/>
 <div id="items"></div>
 </div>`;
}

function allFilter(val){
 let out=[];
 categories.forEach(c=>{
 (state[c]||[]).forEach((r,i)=>{
 if(r.name.toLowerCase().includes(val.toLowerCase()))
 out.push(`<div class="item">${r.name} (${c})</div>`);
 });
 });
 document.getElementById("items").innerHTML=out.join("");
}

home();
</script>

</body>
</html>
